type Transaction @entity {
  id: ID!
  blockNumber: BigInt!
  timestamp: BigInt!
  sender: User!
  reservations: [Reservation!]! @derivedFrom(field: "transaction")
  referral: Referral @derivedFrom(field: "transaction")
}

type User @entity {
  id: ID!
  transactions: [Transaction!]! @derivedFrom(field: "sender")
  reservations: [Reservation!]! @derivedFrom(field: "user")
  referrals: [Referral!]! @derivedFrom(field: "referrer")
  reservedEth: BigInt!
  referredEth: BigInt!
}

type Reservation @entity {
  id: ID!
  transaction: Transaction!
  user: User!
  investmentDay: BigInt!
  amount: BigInt!
}

type Referral @entity {
  id: ID!
  transaction: Transaction!
  referrer: User!
  referee: User!
  amount: BigInt!
}

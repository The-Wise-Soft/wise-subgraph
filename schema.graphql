type Transaction @entity {
  id: ID!
  blockNumber: BigInt!
  timestamp: BigInt!
  ethAmount: BigInt!
  sender: User!
  referral: Referral
  reservations: [Reservation!]! @derivedFrom(field: "transaction")
}

type User @entity {
  id: ID!
  transactions: [Transaction!]! @derivedFrom(field: "sender")
  reservations: [Reservation!]! @derivedFrom(field: "user")
  reservationDays: [UserReservationDay!]! @derivedFrom(field: "user")
  referrals: [Referral!]! @derivedFrom(field: "referrer")
  reservedEth: BigInt!
  referredEth: BigInt!
}

type Reservation @entity {
  id: ID!
  transaction: Transaction!
  timestamp: BigInt!
  user: User!
  investmentDay: BigInt!
  amount: BigInt!
  realAmount: BigInt!
  referral: Referral
}

type Referral @entity {
  id: ID!
  transaction: Transaction!
  timestamp: BigInt!
  referrer: User!
  referee: User!
  amount: BigInt!
}

type UserReservationDay @entity {
  id: ID!
  user: User!
  investmentDay: BigInt!
  totalAmount: BigInt!
  reservationCount: BigInt!
}